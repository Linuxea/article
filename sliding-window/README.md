## Background

在日常需求中，我们可能经常会遇到：
- 用户每24小时只能抽奖10次
- 这个高频接口每1分钟只能请求1万次
- GPT-4 每 3 小时最多只能发送 25 条消息

这些概念并不陌生，让人容易联想到 tcp 的滑动窗口。

TCP（传输控制协议）的滑动窗口机制解决了两个主要问题：流量控制和拥塞控制。滑动窗口机制通过动态调整窗口大小来实现这两个目标。

- 流量控制：滑动窗口机制使发送方和接收方能够协同工作，以便在发送方发送数据之前确定接收方具有足够的缓冲区来处理即将到来的数据。这样可以避免接收方的缓冲区溢出，从而确保可靠的数据传输。接收方通过TCP的窗口大小字段告诉发送方其当前可用的缓冲区大小，发送方则根据这个信息来调整发送数据的速率。

- 拥塞控制：网络拥塞会导致数据包的丢失和延迟，从而影响TCP连接的性能。滑动窗口机制还有助于减轻网络拥塞，它使发送方能够基于网络条件动态调整其发送速率。当网络出现拥塞时，发送方会减小窗口大小以降低发送速率，从而减轻拥塞。当网络恢复正常时，发送方会逐渐增大窗口大小，以提高传输速率。这个过程通常通过一些拥塞控制算法（如TCP Tahoe、Reno、Cubic等）实现。

TCP的滑动窗口机制通过实现流量控制和拥塞控制，确保了可靠的数据传输，并充分利用了网络资源。



